# 稀疏数组

## 定义

> 稀疏数组可以看做是普通数组的压缩，但是这里说的普通数组是指无效数据量远大于有效数据量的数组。

### 使用场景

稀疏数组有很多的使用场景 ，比如五子棋（思路：单数为黑棋，双数为白棋；数字从小到大可记录下棋顺序），棋盘很大，但是一盘下完后，大部分的位置都是没有棋字的。这是可以使用稀疏数组存储，使用时也可以还原成初始的二维数组。

## 举例

![image-20210527091550740](https://gitee.com/koala010/typora/raw/master/img/image-20210527091550740.png)

例如如下数组，即可使用稀疏数组压缩：

```
0 0 0 0 0 0 0 0 0 0 0
0 0 1 0 0 0 0 0 0 0 0
0 0 0 0 2 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0
```

压缩后的结果：

```
11 11 2
1  2  1
2  4  2
```

原本占用了`11 * 11`空间，压缩后只占用了`3 * 3`的空间。



## 为什么要进行数组的压缩存储？

- 原数组中存在大量的无效数据，占据了大量的存储空间，真正有用的数据却少之又少
- 压缩存储可以节省存储空间以避免资源的不必要的浪费，在数据序列化到磁盘时，压缩存储可以提高IO效率



## 处理方法

1. 记录数组**一共有几行几列，有多少个不同**的值
2. 把具有不同值的元素的行列及值记录在一个小规模的数组中，从而**缩小程序**规模

如下：

```
0  0  0  22 0  0  15
0  11 0  0  0  17 0
0  0  0  -6 0  0  0
0  0  0  0  0  39 0
91 0  0  0  0  0  0
0  0  28 0  0  0  0
```

|      | 行（row） | 列（col） | 值（value） |
| ---- | --------- | --------- | ----------- |
| [0]  | 6         | 7         | 8           |
| [1]  | 0         | 3         | 22          |
| [2]  | 0         | 6         | 15          |
| [3]  | 1         | 1         | 11          |
| [4]  | 1         | 5         | 17          |
| [5]  | 2         | 3         | -6          |
| [6]  | 3         | 5         | 39          |
| [7]  | 4         | 0         | 91          |
| [8]  | 5         | 2         | 28          |

### 稀疏数组存储方式

1. 第一行存储原始数据总行数，总列数，总的非0数据个数
2. 接下来每一行都存储非0数所在行，所在列，和具体值
      例如上面的稀疏数组：
      第一行代表：原始的二维数组一共6行7列，并且有8个非0值
      第二行代表：原始的二维数组的第1行第4列的值为22
      ........................



## 稀疏数组与二维数组互相转换

### 思路

**二维数组转稀疏数组思路:**

1. 遍历原始的二维数组，得到有效数据的个数`sum`

2. 根据`sum`就可以创建稀疏数组`sparseArr[sum+1][3]`

3. 将二维数组的有效数据数据存入到稀疏数组



**稀疏数组转二维数组思路:**

1. 先读取稀疏数组的第一行，根据第一行的数据，创建原始的二维数组。

2. 在读取稀疏数组后几行的数据，并赋给原始的二维数组即可。



### 代码实现

[Java实现稀疏数组](./SparseArray.java)

#### 结果

**测试用例1：**

```java
---二维数组转稀疏数组---
6	7	8	
0	3	22	
0	6	15	
1	1	11	
1	5	17	
2	3	-6	
3	5	39	
4	0	91	
5	2	28	
---稀疏数组转二维数组---
0	0	0	22	0	0	15	
0	11	0	0	0	17	0	
0	0	0	-6	0	0	0	
0	0	0	0	0	39	0	
91	0	0	0	0	0	0	
0	0	28	0	0	0	0	
```

**测试用例2：**

```java
棋盘测试
---二维数组转稀疏数组---
11	11	2	
1	2	1	
2	4	2	
---稀疏数组转二维数组---
0	0	0	0	0	0	0	0	0	0	0	
0	0	1	0	0	0	0	0	0	0	0	
0	0	0	0	2	0	0	0	0	0	0	
0	0	0	0	0	0	0	0	0	0	0	
0	0	0	0	0	0	0	0	0	0	0	
0	0	0	0	0	0	0	0	0	0	0	
0	0	0	0	0	0	0	0	0	0	0	
0	0	0	0	0	0	0	0	0	0	0	
0	0	0	0	0	0	0	0	0	0	0	
0	0	0	0	0	0	0	0	0	0	0	
0	0	0	0	0	0	0	0	0	0	0	
```

